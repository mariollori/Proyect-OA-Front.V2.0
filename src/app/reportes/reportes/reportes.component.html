
<head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
        rel="stylesheet">
</head>
<body>


    <div class="container mat-elevation-z8" >
        <h4 style="margin-bottom: 40px;"><img src="https://cdn-icons-png.flaticon.com/512/1055/1055644.png">
            Personal de Ayuda Activo</h4>


        <div >
            <div class="search">
                <mat-form-field class="buscador" appearance="standard">
                    <mat-label class="label"><mat-icon>search</mat-icon> Buscar
                        por ...</mat-label>
                    <input matInput (keyup)="applyFilter($event)" #input>
                </mat-form-field>
                <button type="button" data-target="#exampleModal" data-toggle="modal"   (click)="cargartodas()" class="btn btn-info" style="height: 40px;margin-top: 19px;"><img src="assets/estadistica.png" alt="">Todos</button>
                <mat-form-field  style="margin-top: 15px;">
                    <mat-label>Tipo</mat-label>
                    <mat-select [(ngModel)]="opcion">
                        <mat-option value="estudiante" (click)="buscar()">Estudiante</mat-option>
                        <mat-option value="pastor" (click)="buscar()">Pastor</mat-option>
                        <mat-option value="psicologo" (click)="buscar()">Psicologo</mat-option>
                    </mat-select>
                </mat-form-field>

            </div>


            <table mat-table [dataSource]="dataSource" >
                <!-- Position Column -->
                <ng-container matColumnDef="nro">
                    <th mat-header-cell *matHeaderCellDef> No. </th>
                    <td mat-cell *matCellDef="let element;let i= index"> {{i+1}}
                    </td>
                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="nombre">
                    <th mat-header-cell *matHeaderCellDef> Nombre Completo </th>
                    <td mat-cell *matCellDef="let element"> {{element.nombre + '
                        ' + element.apellido}} </td>
                </ng-container>

                <!-- Weight Column -->
                <ng-container matColumnDef="especialidad">
                    <th mat-header-cell *matHeaderCellDef> Correo </th>
                    <td mat-cell *matCellDef="let element">
                        {{element.correo}} </td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="universidad">
                    <th mat-header-cell *matHeaderCellDef> Tipo </th>
                    <td mat-cell *matCellDef="let element">
                        {{element.tipo}} </td>
                </ng-container>

                <ng-container matColumnDef="telefono">
                    <th mat-header-cell *matHeaderCellDef> Numero/Telefono </th>
                    <td mat-cell *matCellDef="let element"> {{element.telefono}}
                    </td>
                </ng-container>


                <ng-container matColumnDef="detalle">
                    <th mat-header-cell *matHeaderCellDef> Ver estadisticas
                    </th>
                    <td mat-cell *matCellDef="let element"> <img
                            src="https://cdn-icons-png.flaticon.com/512/3309/3309960.png"
                            style="cursor: pointer;" (click)="mostrar(element.idpersonal,element.nombre,element.apellido)" alt=""
                            data-toggle="modal"
                            data-target="#personalest"> </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                <!-- Row shown when there is no matching data. -->
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">No data matching the filter
                        "{{input.value}}"</td>
                </tr>
            </table>
            <mat-paginator 
              [pageSize]="5"
              [pageSizeOptions]="[3,5,6]"
              >
</mat-paginator>

        </div>
    </div>


    <!-- Large modal -->


    <div class="modal fade bd-example-modal-lg" id="personalest" tabindex="-1" role="dialog"
        aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h6 class="modal-title" style="text-transform: capitalize;color: #8ea2c6;font-size: 20px;" id="exampleModalLongTitle">
                        <img style="width: 25px; height: 25px;" src="https://e7.pngegg.com/pngimages/728/955/png-clipart-bar-chart-computer-icons-statistics-bar-chart-angle-text.png" alt="">
                        Estadisticas: {{nombrecompleto}}
                    </h6>
                    <button type="button" class="close" data-dismiss="modal"
                        aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="fechas">
                        <button mat-raised-button (click)="allregisters()">Todos los registros</button>
                        <div style="display: flex;align-items: center;">
                            <label >F.Inicio:</label>
                            <input type="date" [(ngModel)]="fechai">
                            <label >F.Fin:</label>
                            <input type="date"  [(ngModel)]="fechaf">
                            <button type="button" (click)="buscarfecha()" class="btn btn-info" style="padding: 0;height: 22px;width: auto;" [disabled]="!fechai && !fechaf"><mat-icon style="margin:0;">search</mat-icon></button>
                        </div>
                        
                    </div>
                    <div >
                        <div style="display: block;" >
                            <canvas baseChart 
                              [datasets]="barChartData"
                              [labels]="barChartLabels"
                              [options]="barChartOptions"
                              [plugins]="barChartPlugins"
                              [legend]="barChartLegend"
                              [colors]="chartColors"
                              [chartType]="barChartType">
                          
                            </canvas>
                          </div>
                          
                        

                    </div>

                </div>
            </div>
        </div>
    </div>


    <!-- Large modal -->


<div class="modal fade bd-example-modal-lg" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
       <div class="modal-header">
                    <h6 class="modal-title" style="text-transform: capitalize;color: #8ea2c6;font-size: 20px;" id="exampleModalLongTitle">
                        <img style="width: 25px; height: 25px;" src="https://e7.pngegg.com/pngimages/728/955/png-clipart-bar-chart-computer-icons-statistics-bar-chart-angle-text.png" alt="">
                        Estadisticas de los {{opcion}}
                    </h6>
                    <button type="button" class="close" data-dismiss="modal"
                        aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="fechas">
                        <button mat-raised-button (click)="cargartodas()">Todos los registros</button>
                        <div style="display: flex;align-items: center;">
                            <label >F.Inicio:</label>
                            <input type="date" [(ngModel)]="fechai">
                            <label >F.Fin:</label>
                            <input type="date"  [(ngModel)]="fechaf">
                            <button type="button" (click)="buscarfechasdetodos()" class="btn btn-info" style="padding: 0;height: 22px;width: auto;" [disabled]="!fechai && !fechaf"><mat-icon style="margin:0;">search</mat-icon></button>
                        </div>
                        
                    </div>
                    <div >
                        <div style="display: block;" >
                            <canvas baseChart 
                              [datasets]="barChartData"
                              [labels]="barChartLabels"
                              [options]="barChartOptions"
                              [plugins]="barChartPlugins"
                              [legend]="barChartLegend"
                              [colors]="chartColors"
                              [chartType]="barChartType">
                          
                            </canvas>
                          </div>
                          
                        

                    </div>

                </div>
    </div>
  </div>
</div>





    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>




</body>
