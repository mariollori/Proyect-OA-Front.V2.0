<head>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
    rel="stylesheet">
</head>
<body>
  <h5 class="title"><div class="puntero"></div><img class="imgheader" src="assets/paciente.png">Pacientes Asignados</h5>
  

  <div class="container">
    
    <div class="listproximasS">
      <h5><i class="fas fa-stopwatch" style="margin-right: 15px;"></i>Proximas Sesiones</h5>
      <div class="proximassesiones">
        <!--Tabla-->

        <div *ngFor="let aten of atenciones_pend" class="proxsesion">

            <h6 style="font-weight: bold;margin-bottom: 20px;font-size: 13.5px; color: #419dc8;"><i class="fas fa-user-tie" style="margin-right: 10px;"></i>
            {{aten.nombre + ' ' +
            aten.apellido}} </h6>

          <div style="display: flex;flex-direction: row;font-size: 13px;">
            <p><i class="far fa-calendar" style="margin-right: 10px;"></i>Fecha: {{aten.fecha_sesion | date:'dd/MM/yyyy'}}</p>
            <p style="margin-left: 50px;"><i class="far fa-clock" style="margin-right: 10px;"></i>Hora :{{aten.fecha_sesion | date:"shortTime" : 'UTC'}}</p>
          </div>
        
          <app-cronometro [end]="aten.fecha_sesion" style="width: 100%;height: 65px;margin: 0 auto;"></app-cronometro>
          <i class="fas fa-sync-alt" style="position: absolute;cursor: pointer;left: calc(100% - 30px);top: 10px;color: #4267b2;" (click)="asignaridfecha(aten.idregistro_aten,aten.fecha_sesion,aten.hora)"
          data-toggle="modal"
          data-target="#modificarfecha"></i>
            
            
          
        </div>



      </div>

    </div>
    <app-spinner-blanc *ngIf="cargando" style="min-width: 60%;height: 80%;margin-top: 50px;"></app-spinner-blanc>
    <div class="list-pac" *ngIf="!cargando">
      <!-- <div class="card" *ngFor="let pac of datalist">
         <div class="card-body">
          <div style="display: flex;flex-direction: row;">
            <img class="imgpac" *ngIf="pac.genero == 'M'"
            src="https://armeniahotel.com.co/wp-content/uploads/2017/07/avatars-1-06.jpg"
            />
          <img class="imgpac" *ngIf="pac.genero == 'H'"
            src="https://bootdey.com/img/Content/avatar/avatar6.png" />
            <div style="margin-left: 15px;">
              <label style="font-weight: bold;margin-bottom: 0;margin-top: 20px;" >{{pac.nombre + pac.apellido}}</label>
              <label style="color: #bebebe;font-size: 12px;;margin-bottom: 0" >{{pac.correo}}</label>
              <label style="color: #bebebe;font-size: 12px;" >{{pac.telefono}}</label>
    
            </div>
          </div>
          <div>
            <label style="font-size: 12px;" for=""> {{pac.descripcion}}</label>
          </div>
          <i class="far fa-times-circle" ></i>
         </div>
         <div class="card-btns">
           <button data-target="#register_aten"
           data-toggle="modal"
           (click)="verificarsesiones(pac.idasignacion,pac.idpaciente)">
             Registrar Atencion
           </button>
         </div>
      </div>
       -->
     


   <div class="card2" *ngFor="let pac of datalist">
    <div class="img-container">
      <img class="imgpac2" *ngIf="pac.genero == 'M'"
            src="https://armeniahotel.com.co/wp-content/uploads/2017/07/avatars-1-06.jpg"
            />
          <img class="imgpac2" *ngIf="pac.genero == 'H'"
            src="https://bootdey.com/img/Content/avatar/avatar6.png" />
    </div>
   <div class="card-body2">
     
     <div style="display: flex;flex-direction: column; margin-right:10px ;width: 60%; justify-content: flex-start;">
       
    
         <label style="font-weight: bold;margin-bottom: 0;" >{{pac.nombre + pac.apellido}}</label>
         <label style="color: #bebebe;font-size: 12px;;margin-bottom: 0" >{{pac.correo}}</label>
         <label style="color: #bebebe;font-size: 12px;" >{{pac.telefono}}</label>
  
       
       <div >
        <label style="font-size: 12px;max-width: 500px;" >{{pac.descripcion}}</label>
      </div>
     </div>
     
   
  
    <div class="card-btns2">
     <button data-target="#register_aten"
     data-toggle="modal"
     (click)="verificarsesiones(pac.idasignacion,pac.idpaciente)">
       Registrar Atencion
     </button>
     <button data-toggle="modal"  data-target="#cancelaratencion" (click)="detallecancelar(pac)">
       Cancelar Sesion
     </button>
   </div>
   </div>
   
  </div>

     


  

    </div>




    
  </div>
</body>

<script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();   
});
</script>
<!-- Modal Registro de Atencion xd -->
<div class="modal fade bd-example-modal-lg" id="register_aten" tabindex="-1"
  role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      





      <app-spinner-blanc *ngIf="cargando2"></app-spinner-blanc>
      <div class="modal-body" *ngIf="!cargando2">
        <div style="width: 100%;height: 100px;display: flex;
        justify-content: center;align-items: center ;"> 
          <h5 style="font-weight: bold;font-size: 19px;">Registrar Atencion</h5>
  
        </div>
     
           <div style="width: 60%;margin-left: 20%;">
            <div class="form-personal" *ngIf="counter==0">
              <h5>Datos Personales del Paciente</h5>
              <form [formGroup]="datapaciente" class="formulario">
    

                <div class="input-style" >
                  <label class="xd">  <i class="fas fa-building"></i>Ciudad:</label>
                
                  <input  type="text" formControlName="ciudad" />
                  
                  
                </div>
    
                
                <div class="input-style"  >
                  <label><i class="fas fa-praying-hands"></i>Religion:</label>
                  
                  <input  type="text" formControlName="religion"/>
               
                 
                </div>
                <div class="input-style"  >
                  <label><i class="fab fa-black-tie"></i>Ocupacion:</label>
             
                  
                  <input  type="text" formControlName="ocupacion" />
                
                </div>
                <div class="input-style" >
                  <label>Fecha de Nacimiento:</label>
                  <input  type="date" formControlName="fecha_nacimiento" />
    
                 
                </div>


                
                  <div class="input-style" >
                  <label >Grado Academico:</label>
                    <select formControlName="grado_educacion" name="food">
                      <option value="primaria">Primaria</option>
                      <option value="secundaria">Secundaria</option>
                      <option value="universidad">Universidad</option>
                    </select>
                  
                  </div>
                  
              
      
                  <div class="input-style" >
                    <label > <i class="fas fa-user-clock"></i> Edad</label>
                   
                    <input  type="text" formControlName="edad" />
              
                 
                  </div>
                
                
    
    
    
    
             
    
              </form>
          
            </div>
         
            
            <div class="form-sesion">
              <h5>Datos de la Sesion</h5>
              <form [formGroup]="datosatencion" class="formulario">
                
    
                <div class="input-style"  >
                  <label>Condicion:</label>
                  <input  type="text" formControlName="condicion" />
               
                 
                </div>
    
                <div class="input-style" >
                  <label>Evidencia:</label>
                  <input  type="text" formControlName="evidencia" />
                 
               
                </div>
    
                <div class="input-style" style="height: 100px;display: flex;justify-content: flex-start;"    >
                 <label>Observaciones:</label>
                 <textarea  formControlName="observaciones"  style="width: 60%;height: 100%;"
                 placeholder="Ex. It makes me feel..."></textarea>
                 
               
                </div>
    
                <div *ngIf="counter==2">
                  <mat-slide-toggle [(ngModel)]="derivacion"
                    [ngModelOptions]="{standalone: true}" name="derivacion"
                    class="example-margin">
                    Â¿Derivar con especialista?
                  </mat-slide-toggle>
                </div>
              </form>
          
         
            </div>
         
           
           </div>
           <div style="width:60%;margin-left: 20%;">
            
             
           
             <div class="form-horarios" *ngIf="counter!=2" style="width: 100%;margin: 0;margin-right: 0;">
              <h5>Horario de Proxima Sesion</h5>
              <form [formGroup]="fechaatencion" class="formulario" >
                <div class="input-style" disabled>
                  <label>Fecha y Hora de Sesion:</label>
                  <input  type="datetime-local" formControlName="fecha"  />
                </div>
                
                <div class="input-style" disabled>
                  <label>Link de sesion:</label>
                  <input  type="text"  />
                </div>
               
              </form>
          
          </div>
           </div>
           
        
    
        
        
        


       
      </div>
      <div class="modal-footer" style="border-top: none;">
        <div class="btns-form" *ngIf="counter==0">
          <button mat-button (click)="reset()" data-dismiss="modal"
            class="btn-step2">Cancelar <mat-icon matSuffix>cancel</mat-icon></button>
          <button mat-button class="btn-step" (click)="registraratencion()"
            [disabled]="datapaciente.invalid || datosatencion.invalid ||
            fechaatencion.invalid">Guardar <mat-icon matSuffix>save_alt</mat-icon></button>
        </div>
        <div class="btns-form" *ngIf="counter==1">
          <button mat-button (click)="reset()" data-dismiss="modal"
            class="btn-step2">Cancelar <mat-icon matSuffix>cancel</mat-icon></button>
          <button mat-button class="btn-step" (click)="registraratencion()"
            [disabled]="datosatencion.invalid || fechaatencion.invalid">Guardar
            <mat-icon matSuffix>save_alt</mat-icon></button>
        </div>
        <div class="btns-form" *ngIf="counter==2">
          <button mat-button (click)="reset()" data-dismiss="modal"
            class="btn-step2">Cancelar <mat-icon matSuffix>cancel</mat-icon></button>
          <button mat-button class="btn-step" (click)="registraratencion()"
            [disabled]="datosatencion.invalid">Guardar<mat-icon matSuffix>save_alt</mat-icon></button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal cancelaratencion-->
<div class="modal fade" id="cancelaratencion" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header" style="border-bottom: 0;background-color: #4267b2;">
        <h5 class="modal-title"  style="color: white;" id="exampleModalLongTitle">Cancelar Atencion</h5>
        <button type="button" style="transition: transform .3s;" class="close"  data-dismiss="modal"
        >
          <i style="color: white;" class="far fa-times-circle"></i>
         </button>
      </div>
      <div class="modal-body">
        <label style="font-size: 13px;color: gray;"> Esta accion es irreversible. Si esta seguro de continuar introdusca el motivo de la cancelacion de la cita.</label>
        <div class="form-group row" >
          <label for="staticEmail"  class="col-sm-1 col-form-label"><i style="font-size: 15px;font-weight: bold;" class="far fa-user-circle"></i></label>
          <div *ngIf="detallecancelacion" class="col-sm-10">
            <input type="text" style="font-size: 15px;font-weight: bold;" readonly class="form-control-plaintext"
              [(ngModel)]="detallecancelacion.nombre + ' ' +
              detallecancelacion.apellido" id="staticEmail" disabled>
          </div>
        </div>
        <div class="form-group">
          <label for="exampleFormControlTextarea1" style="font-size: 15px;font-weight: bold;"><i class="fas fa-comment-dots" style="margin-right: 25px;"></i>Motivo:</label>
          <textarea class="form-control" style="font-size: 13px;" id="exampleFormControlTextarea1"
            [(ngModel)]="motivocancelar" rows="3"></textarea>
        </div>
        <div class="footer">
          <button type="button" class="btn-cancel1"
            data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn-cancel2"
            (click)="cancelaratencion()">Guardar</button>
        </div>


      </div>



    </div>
  </div>
</div>



<!-- Modal Modificarfecha -->
<div class="modal fade" id="modificarfecha" tabindex="-1" role="dialog"
  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header" style="border-bottom: 0;background-color: #4267b2;color: white;">
        <h5 class="modal-title" id="exampleModalLongTitle" style="font-size:18px;">Modificar Sesion</h5>
        <button type="button" style="transition: transform .3s;" class="close"  data-dismiss="modal"
        >
          <i style="color: white;" class="far fa-times-circle"></i>
         </button>
      </div>
      <div class="modal-body" style="padding: 30px 15px;">


       <div style="display: flex;flex-direction: row;">
        <img src="https://www.sesametime.com/assets/wp-content/uploads/2020/01/definicion-sistema-control-horario.jpg" width="150px" height="110px" style="margin-right: 25px;" alt="">
        <div class="form-group">
          <label style="font-weight: bold;font-size: 13px;margin-right: 15px;">Proxima Sesion:</label>
          <input type="datetime-local" style="outline: none;font-size: 13px;border: 2px solid #00ccbe;padding: 5px 10px;margin-bottom: 15px;" [(ngModel)]="fechaactual"  />
          <label style="font-weight: bold;font-size: 13px;margin-right: 35px;margin-bottom: 0;" >Link de la Sesion:</label>
          <input type="text" style="outline: none;border: none;border-bottom:2px solid #00ccbe;font-size: 13px;width: 250px;">
        </div>

       </div>

        
        <div class="footer">
          <button type="button" class="btn-cancel1"
            data-dismiss="modal">Cancelar</button>
          <button type="button" class="btn-cancel2"
            (click)="guardarfechamodif()">Modificar</button>
        </div>


      </div>



    </div>
  </div>
</div>